<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>For Suhani ‚ù§Ô∏è From Likun</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Parisienne&family=Dancing+Script:wght@600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.7.14/lottie.min.js"></script>
<style>
  /* === base === */
  :root{
    --accent:#ff4b5c;
    --accent-dark:#c42f3a;
    --bg1:#0b0c2a;
    --bg2:#1a1c4d;
  }
  html,body{height:100%;margin:0;font-family:'Dancing Script',cursive;background:radial-gradient(ellipse at bottom,var(--bg1) 0%,var(--bg2) 100%);color:#fff;overflow-x:hidden;}
  h1,h2{font-family:'Great Vibes',cursive;margin:0;padding:0;text-align:center;}
  h1{font-size:3.2rem;color:#ffb6c1;margin-top:18px;}
  h2{font-size:2rem;color:#ffe4e1;margin-bottom:8px;}
  p{line-height:1.4;}

  /* intro popup */
  #introPopup{position:fixed;inset:0;background:rgba(0,0,0,0.82);display:flex;align-items:center;justify-content:center;z-index:9999}
  #introPopup .box{padding:28px;text-align:center;font-size:1.2rem;background:linear-gradient(180deg,#2a1b3d,#1b1330);border-radius:14px;box-shadow:0 8px 40px rgba(0,0,0,0.6)}
  #introPopup button{margin-top:14px;padding:12px 20px;border-radius:30px;border:none;background:var(--accent);color:#fff;font-size:1rem;cursor:pointer}

  /* lamps */
  .lamp{position:absolute;width:18px;height:44px;background:linear-gradient(#fff3a0,#f29f05);border-radius:9px;top:46px}
  .lamp::after{content:"";position:absolute;top:46px;left:-6px;width:30px;height:6px;border-radius:50%;background:rgba(255,255,255,0.15)}

  /* floating rose (kept for visual style) */
  .rose{position:absolute;width:32px;animation:float 8s linear infinite;pointer-events:none}
  @keyframes float{0%{transform:translateY(100vh) rotate(0deg);opacity:0}10%{opacity:1}100%{transform:translateY(-40px) rotate(360deg);opacity:0}}

  /* layout sections */
  .section{display:none;padding:18px 16px;text-align:center}
  .visible{display:block}

  /* question inputs - larger and responsive */
  .questions{display:flex;flex-direction:column;align-items:center}
  .questions input{
    width:92%;
    max-width:520px;
    padding:18px 16px;
    margin:10px 0;
    border-radius:28px;border:none;
    background:var(--accent);
    color:#fff;
    font-size:1.15rem;
    text-align:center;
    box-shadow:0 6px 18px rgba(0,0,0,0.35);
    font-family:'Parisienne',cursive;
    line-height:1.2;
    white-space:normal;
    word-wrap:break-word;
    overflow-wrap:break-word;
  }
  .questions input::placeholder{color:#fff;opacity:0.95;white-space:normal;}

  button{padding:12px 24px;border-radius:40px;border:none;background:var(--accent);color:#fff;font-size:1.05rem;cursor:pointer;margin-top:14px;transition:transform .18s}
  button:hover{transform:scale(1.05)}

  /* postcard */
  .postcard{width:360px;height:250px;margin:28px auto;perspective:1100px}
  .postcard-inner{width:100%;height:100%;position:relative;transform-style:preserve-3d;transition:transform 1s}
  .postcard.open .postcard-inner{transform:rotateY(180deg)}
  .postcard-face{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:18px;box-shadow:0 8px 30px rgba(0,0,0,0.45);display:flex;align-items:center;justify-content:center;padding:18px;text-align:center}
  .postcard-front{background:var(--accent);color:#fff;font-size:1.25rem}
  .postcard-back{background:linear-gradient(180deg,#ff737a,#ff4b5c);color:#fff;transform:rotateY(180deg);font-size:1rem;line-height:1.5}

  /* lottie character */
  #character{width:220px;margin:6px auto;cursor:pointer}

  /* game canvas */
  #gameCanvas{background:rgba(255,248,240,0.95);border:3px solid var(--accent);border-radius:18px;display:block;margin:14px auto}

  /* confetti pieces */
  .confetti-piece{position:absolute;width:10px;height:10px;opacity:0.95;border-radius:2px;pointer-events:none}

  /* small screens adjustments */
  @media (max-width:520px){
    h1{font-size:2.4rem}
    h2{font-size:1.6rem}
    .questions input{font-size:1.05rem;padding:16px}
    .postcard{width:320px;height:220px}
    #gameCanvas{width:340px;height:340px}
  }
</style>
</head>
<body>

<!-- Intro popup -->
<div id="introPopup">
  <div class="box">
    <p style="font-size:1.4rem">Hi Suhani! How are you doing today? ü•∞</p>
    <button onclick="startGift()">Start</button>
  </div>
</div>

<!-- decorative lamps -->
<div class="lamp" style="left:48px"></div>
<div class="lamp" style="left:148px"></div>
<div class="lamp" style="left:248px"></div>
<div class="lamp" style="left:348px"></div>

<!-- title -->
<h1>For Suhani ‚ù§Ô∏è</h1>
<h2>From Likun</h2>

<!-- floating roses (visual) -->
<script>
  for(let i=0;i<14;i++){
    const img=document.createElement('img');
    img.src="https://cdn-icons-png.flaticon.com/512/616/616408.png";
    img.className='rose';
    img.style.left=Math.random()*window.innerWidth+'px';
    img.style.animationDuration=(5+Math.random()*6)+'s';
    document.body.appendChild(img);
  }
</script>

<!-- character -->
<div id="character"></div>
<p style="text-align:center;color:#fff;margin-top:6px">Click me ‚Äî I‚Äôll smile for you! üòä</p>

<!-- QUESTIONS: STEP 1 -->
<div class="section" id="questionSection1">
  <h2>Answer These Cute Questions üíï (1/2)</h2>
  <form id="questionsForm1">
    <div class="questions">
      <!-- kept same structure but with larger placeholders and your requested deep/romantic + fun Qs (death references removed) -->
      <input type="text" name="q1" placeholder="What's your funniest memory of us together? üòÇ" required>
      <input type="text" name="q2" placeholder="What's your all-time favorite snack or comfort food? üç∞" required>
      <input type="text" name="q3" placeholder="If I come to meet you on her rooftop, but you later find out that I have been dead since the last two hours, would you come back to meet me and what would you tell me or do there?" required>
      <input type="text" name="q4" placeholder="Which song always makes you think of me? üé∂" required>
      <input type="text" name="q5" placeholder="If I disappeared from your life for a while, what would you miss most about me? üí≠" required>
    </div>
    <button type="submit">Next 5 Questions ‚û°Ô∏è</button>
  </form>
</div>

<!-- QUESTIONS: STEP 2 -->
<div class="section" id="questionSection2">
  <h2>Answer These Cute Questions üíï (2/2)</h2>
  <form id="questionsForm2">
    <div class="questions">
      <input type="text" name="q6" placeholder="If we went on one crazy adventure, where should we go? üåç" required>
      <input type="text" name="q7" placeholder="If I showed up unexpectedly on your rooftop tonight, what would you say or do first? üåÉ" required>
      <input type="text" name="q8" placeholder="What's a deep moment you'd like us to share someday? (a conversation, a place, a memory) üí¨" required>
      <input type="text" name="q9" placeholder="If you could give me one nickname that sums me up, what would it be? üòÑ" required>
      <input type="text" name="q10" placeholder="What's something about us you'd never want to forget? ‚ú®" required>
    </div>
    <button type="submit">Open My Letter üíå</button>
  </form>
</div>

<!-- Postcard letter (first) -->
<div class="section" id="letterSection">
  <div class="postcard" id="postcard">
    <div class="postcard-inner">
      <div class="postcard-face postcard-front">Click to Open üíå</div>
      <div class="postcard-face postcard-back">
        <p><strong>Dear Suhani,</strong><br><br>
        From the day we started talking, you've filled small moments with light and endless smiles.  
        You make ordinary days feel special ‚Äî thank you for being you.<br><br>
        Forever yours,<br>Likun</p>
      </div>
    </div>
  </div>
  <button onclick="showGame()">Play a Cute Game üéÆ</button>
</div>

<!-- Game -->
<div class="section" id="gameSection">
  <h2>Catch the Falling Hearts üíñ (Max Score 30)</h2>
  <canvas id="gameCanvas" width="400" height="400"></canvas>
</div>

<!-- Suspense questions before final letter -->
<div class="section" id="suspenseSection">
  <h2>Do you want to open the final letter? üíå</h2>
  <div id="suspenseQuestions"></div>
</div>

<!-- Final heartfelt letter (with the personal lines you requested) -->
<div class="section" id="finalLetterSection">
  <div class="postcard" id="finalPostcard">
    <div class="postcard-inner">
      <div class="postcard-face postcard-front">Click to Open üíñ</div>
      <div class="postcard-face postcard-back">
        <p><strong>My Dearest Suhani,</strong><br><br>
        I have been waiting for you for three years ‚Äî through every small hope and quiet moment.  
        I love you more than I can say; even when words fail me, my heart knows the truth. <br><br>
        Whether you feel the same way or not, I promise this: I will do absolutely everything I can to make you happy and to keep you smiling.  
        Your joy will always matter to me more than anything.I know you probably don't care much about me, but you make me smile and happy <br><br>
        No matter what happens, I am here for you ‚Äî always.<br><br>
        ‚Äî Likun ‚ù§Ô∏è</p>
      </div>
    </div>
  </div>
</div>

<!-- background music (play after first click) -->
<audio id="bgMusic" loop>
  <source src="https://www.bensound.com/bensound-music/bensound-romantic.mp3" type="audio/mpeg">
</audio>

<script>
/* ---------- start gift (intro) ---------- */
function startGift(){
  document.getElementById('introPopup').style.display='none';
  document.getElementById('questionSection1').classList.add('visible');
  // Start music on user action
  const bg = document.getElementById('bgMusic');
  bg.play().catch(()=>{ /* autoplay blocked on some browsers; plays on next user gesture */ });
}

/* ---------- Lottie character (same asset) ---------- */
lottie.loadAnimation({
  container: document.getElementById('character'),
  renderer: 'svg',
  loop: true,
  autoplay: true,
  path: 'https://assets7.lottiefiles.com/packages/lf20_i2eyukor.json'
});

/* ---------- Formspree integration (two-step) ---------- */
function submitForm(formId,nextSection){
  const form = document.getElementById(formId);
  form.addEventListener('submit', function(e){
    e.preventDefault();
    const data = new FormData(this);
    // POST to your provided Formspree endpoint
    fetch('https://formspree.io/f/mldpwrlr', {
      method: 'POST',
      body: data,
      headers: { 'Accept': 'application/json' }
    }).then(response=>{
      if(response.ok){
        // move to next section (or letter)
        if(nextSection){
          document.getElementById(formId).parentElement.style.display='none';
          document.getElementById(nextSection).classList.add('visible');
        } else {
          // second form => show first letter section
          document.getElementById('questionSection2').style.display='none';
          document.getElementById('letterSection').classList.add('visible');
        }
      } else {
        alert('Oops! Something went wrong sending your answers ‚Äî please try again.');
      }
    }).catch(err=>{
      alert('Oops! Something went wrong sending your answers ‚Äî please try again.');
    });
  });
}
submitForm('questionsForm1','questionSection2');
submitForm('questionsForm2',null);

/* ---------- postcard open toggles ---------- */
document.getElementById('postcard').onclick = function(){ this.classList.toggle('open'); }
document.getElementById('finalPostcard').onclick = function(){ this.classList.toggle('open'); }

/* ---------- Game logic (60FPS, hearts, max score 30) ---------- */
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let hearts = [];
let score = 0;
let gameRunning = false;
function Heart(){
  this.x = Math.random()*(canvas.width-20)+10;
  this.y = -20;
  this.size = 20;
  this.speed = 2 + Math.random()*2;
  this.draw = function(){
    ctx.fillStyle = 'red';
    ctx.beginPath();
    ctx.moveTo(this.x,this.y);
    ctx.bezierCurveTo(this.x,this.y-10,this.x-15,this.y-15,this.x,this.y+10);
    ctx.bezierCurveTo(this.x+15,this.y-15,this.x,this.y-10,this.x,this.y);
    ctx.fill();
  };
  this.update = function(){ this.y += this.speed; };
}
let player = { x: canvas.width/2, y: canvas.height-30, width: 60, height: 20 };
document.addEventListener('mousemove', e => {
  // map mouse to canvas coordinates when over canvas area
  const rect = canvas.getBoundingClientRect();
  let mx = e.clientX - rect.left;
  if(mx < 0) mx = 0;
  if(mx > rect.width) mx = rect.width;
  player.x = mx - player.width/2;
});

function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // spawn hearts
  if(Math.random()<0.03 && hearts.length < 30) hearts.push(new Heart());
  // update/draw hearts
  hearts.forEach((h,i)=>{
    h.update();
    h.draw();
    if(h.y > canvas.height+30) hearts.splice(i,1);
    // collision
    if(h.y + h.size > player.y && h.x > player.x && h.x < player.x + player.width){
      hearts.splice(i,1);
      score++;
    }
  });
  // draw player
  ctx.fillStyle = '#111';
  ctx.fillRect(player.x, player.y, player.width, player.height);
  // score
  ctx.fillStyle = 'red';
  ctx.font = '20px Great Vibes, serif';
  ctx.fillText('Score: ' + score, 12, 28);

  if(score >= 30){
    endGame();
    return;
  }
  requestAnimationFrame(gameLoop);
}

function showGame(){
  document.getElementById('letterSection').style.display='none';
  document.getElementById('gameSection').classList.add('visible');
  if(!gameRunning){
    gameRunning = true;
    requestAnimationFrame(gameLoop);
  }
}
function createConfetti(){
  for(let i=0;i<220;i++){
    const div = document.createElement('div');
    div.className = 'confetti-piece';
    div.style.left = Math.random()*window.innerWidth + 'px';
    div.style.top = Math.random()*-200 + 'px';
    div.style.background = 'hsl(' + Math.random()*360 + ',100%,50%)';
    div.style.width = div.style.height = (4 + Math.random()*8) + 'px';
    document.body.appendChild(div);
    fall(div);
  }
}
function fall(div){
  let top = parseFloat(div.style.top);
  let left = parseFloat(div.style.left);
  let rot = Math.random()*360;
  function frame(){
    top += 3 + Math.random()*2;
    rot += 6;
    div.style.transform = `translate(${0}px,${top}px) rotate(${rot}deg)`;
    if(top < window.innerHeight + 200) requestAnimationFrame(frame);
    else div.remove();
  }
  frame();
}
function endGame(){
  createConfetti();
  alert("Congrats Suhani! You caught all the hearts! üéâüíñ");
  document.getElementById('gameSection').style.display='none';
  startSuspense();
}

/* ---------- Suspense questions (begging if No) ---------- */
const suspenseQs = [
  "Do you want to open the final letter? üíå",
  "Are you sure you want to see it? ü§î",
  "Do you really want to hear what's in my heart? ‚ù§Ô∏è",
  "Promise you'll keep it between us? ü§´",
  "Ready to read something honest? üíï",
  "Final chance to say NO üòÖ"
];
let currentQ = 0;
function startSuspense(){
  document.getElementById('suspenseSection').classList.add('visible');
  askNext();
}
function askNext(){
  if(currentQ >= suspenseQs.length){
    showFinalLetter(); return;
  }
  const container = document.getElementById('suspenseQuestions');
  container.innerHTML = `<p style="font-size:1.05rem">${suspenseQs[currentQ]}</p>
    <button onclick="nextQuestion(true)">Yes</button>
    <button onclick="nextQuestion(false)">No</button>`;
}
function nextQuestion(ans){
  if(!ans){
    // insert a begging-style entry (keeps repeating till she clicks yes)
    suspenseQs.splice(currentQ,0,`Please Suhani, don't leave me hanging ‚Äî click Yes? üò¢`);
  } else {
    currentQ++;
  }
  askNext();
}
function showFinalLetter(){
  document.getElementById('suspenseSection').style.display='none';
  document.getElementById('finalLetterSection').classList.add('visible');
}

/* ---------- ensure canvas sized for responsiveness ---------- */
(function adjustCanvas(){
  const c = document.getElementById('gameCanvas');
  function resize(){
    const maxW = Math.min(420, window.innerWidth - 40);
    c.width = maxW;
    c.height = maxW;
    // adjust player default position
    player.x = c.width/2 - player.width/2;
    player.y = c.height - 30;
  }
  window.addEventListener('resize', resize);
  resize();
})();

</script>
</body>
</html>
